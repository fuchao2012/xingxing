/*! pubsub 2017-06-06 */
!function(a,b){"use strict";if("function"==typeof define&&define.amd)define(["exports"],b);else if("object"==typeof exports)b(exports);else{var c={};a.PubSub=c,b(c)}}("object"==typeof window&&window||this,function(a){"use strict";function b(a,b){this.func=a,this.priority=b}function c(a){var b;for(b in a)if(a.hasOwnProperty(b))return!0;return!1}function d(a){return function(){throw a}}function e(a,b,c){try{a(c)}catch(e){setTimeout(d(e),0)}}function f(a,b,c){a(c)}function g(a,c,d,g){var h,i=k[c],j=g?f:e;if(k.hasOwnProperty(c)){var l=[];for(h in i)i.hasOwnProperty(h)&&l.push(i[h]);l.sort(b.sortByPriority);for(var m=l.length,n=0;m>n;n++){var h=l[n].func;j(h,a,d)}}}function h(a,b,c){return function(){var d=String(a),e=d.lastIndexOf(".");for(g(a,a,b,c);-1!==e;)d=d.substr(0,e),e=d.lastIndexOf("."),g(a,d,b,c)}}function i(a){for(var b=String(a),d=Boolean(k.hasOwnProperty(b)&&c(k[b])),e=b.lastIndexOf(".");!d&&-1!==e;)b=b.substr(0,e),e=b.lastIndexOf("."),d=Boolean(k.hasOwnProperty(b)&&c(k[b]));return d}function j(a,b,c,d){var e=h(a,b,d),f=i(a);return f?(c===!0?e():setTimeout(e,0),!0):!1}var k={},l=-1;b.sortByPriority=function(a,b){return a.priority-b.priority},a.publish=function(b,c){return j(b,c,!1,a.immediateExceptions)},a.publishSync=function(b,c){return j(b,c,!0,a.immediateExceptions)},a.subscribe=function(a,c,d,e){return"function"!=typeof c?!1:(k.hasOwnProperty(a)||(k[a]={}),d||(d=1),e||(e="uid_"+String(++l)),k[a][e]=new b(c,d),e)},a.clearAllSubscriptions=function(){k={}},a.clearSubscriptions=function(a){var b;for(b in k)k.hasOwnProperty(b)&&0===b.indexOf(a)&&delete k[b]},a.unsubscribe=function(a){var b,c,d,e="string"==typeof a&&k.hasOwnProperty(a),f=!e&&"string"==typeof a,g="function"==typeof a,h=!1;if(e)return void delete k[a];for(b in k)if(k.hasOwnProperty(b)){if(c=k[b],f&&c[a]){delete c[a],h=a;break}if(g)for(d in c)c.hasOwnProperty(d)&&c[d]===a&&(delete c[d],h=!0)}return h}});